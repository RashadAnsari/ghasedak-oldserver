syntax = "proto3";

package ir.sndu;

option java_package = "ir.sndu.rpc";

import "api/auth.proto";

service AuthService {
    rpc StartPhoneAuth (RequestStartPhoneAuth) returns (ResponseStartPhoneAuth) {
    }
    rpc ValidatePhoneCode (RequestValidatePhoneCode) returns (ResponseValidatePhoneCode) {
    }
    rpc SignUpWithPhone (RequestSignUpWithPhone) returns (ResponseSignUpWithPhone) {
    }
}

message RequestStartPhoneAuth {
    int64 phone_number = 1;
    int32 app_id = 2;
    string api_key = 3;
    string device_hash = 4;
    string device_info = 5;
}

message ResponseStartPhoneAuth {
    string transaction_hash = 1;
}

message RequestValidatePhoneCode {
    string transaction_hash = 1;
    string code = 2;
}

message ResponseValidatePhoneCode {
    bool is_registered = 1;
    ApiAuth api_auth = 2;
}

message RequestSignUpWithPhone {
    string transaction_hash = 1;
    string name = 2;
}

message ResponseSignUpWithPhone {
    ApiAuth api_auth = 2;
}