syntax = "proto3";

package ir.sndu.rpc;

option java_package = "ir.sndu.rpc.messaging";
option java_multiple_files = true;
option (scalapb.options) = {
  flat_package: true
};

import "scalapb/scalapb.proto";
import "api/messaging.proto";

service MessagingService {
    rpc SendMessage (RequestSendMessage) returns (ResponseVoid) {}
    rpc LoadDialogs (RequestLoadDialogs) returns (ResponseLoadDialogs) {}
}

message RequestSendMessage {
    int64 chat_id = 1; //Destination chat for message
    int64 random_id = 2; //Message random id (generated on client side)
    ir.sndu.api.ApiMessage message = 3; //The message
}

message ResponseVoid {}

message RequestLoadDialogs {
    int64 min_date = 1; //start date of conversation loading. Use 0 to load latest messages
    int32 limit = 2; //limit maximum amount of messages (max is 10)
}
message ResponseLoadDialogs {
    repeated ir.sndu.api.ApiDialog dialogs = 1;
}